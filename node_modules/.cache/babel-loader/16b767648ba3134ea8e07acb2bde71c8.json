{"ast":null,"code":"var _jsxFileName = \"/home/ec2-user/environment/VarsityMediaLive07042021/src/pages/dashboard/Calendar.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useRef, useEffect } from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { Helmet } from 'react-helmet-async';\nimport FullCalendar from '@fullcalendar/react';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport interactionPlugin from '@fullcalendar/interaction';\nimport listPlugin from '@fullcalendar/list';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport timelinePlugin from '@fullcalendar/timeline';\nimport { Box, Breadcrumbs, Button, Card, Container, Dialog, Grid, Link, Typography } from '@material-ui/core';\nimport { alpha, experimentalStyled } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { CalendarEventForm, CalendarToolbar } from '../../components/dashboard/calendar';\nimport ChevronRightIcon from '../../icons/ChevronRight';\nimport PlusIcon from '../../icons/Plus';\nimport gtm from '../../lib/gtm';\nimport { closeModal, getEvents, openModal, selectEvent, selectRange, updateEvent } from '../../slices/calendar';\nimport { useDispatch, useSelector } from '../../store';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst selectedEventSelector = state => {\n  const {\n    events,\n    selectedEventId\n  } = state.calendar;\n\n  if (selectedEventId) {\n    return events.find(_event => _event.id === selectedEventId);\n  }\n\n  return null;\n};\n\nconst FullCalendarWrapper = experimentalStyled('div')(({\n  theme\n}) => ({\n  '& .fc-license-message': {\n    display: 'none'\n  },\n  '& .fc': {\n    '--fc-bg-event-opacity': 1,\n    '--fc-border-color': theme.palette.divider,\n    '--fc-daygrid-event-dot-width': '10px',\n    '--fc-event-text-color': theme.palette.text.primary,\n    '--fc-list-event-hover-bg-color': theme.palette.background.default,\n    '--fc-neutral-bg-color': theme.palette.background.default,\n    '--fc-page-bg-color': theme.palette.background.default,\n    '--fc-today-bg-color': alpha(theme.palette.primary.main, 0.25),\n    color: theme.palette.text.primary,\n    fontFamily: theme.typography.fontFamily\n  },\n  '& .fc .fc-col-header-cell-cushion': {\n    paddingBottom: '10px',\n    paddingTop: '10px'\n  },\n  '& .fc .fc-day-other .fc-daygrid-day-top': {\n    color: theme.palette.text.secondary\n  },\n  '& .fc-daygrid-event': {\n    padding: '10px'\n  }\n}));\n\nconst Calendar = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const calendarRef = useRef(null);\n  const mobileDevice = useMediaQuery(theme => theme.breakpoints.down('sm'));\n  const {\n    events,\n    isModalOpen,\n    selectedRange\n  } = useSelector(state => state.calendar);\n  const selectedEvent = useSelector(selectedEventSelector);\n  const [date, setDate] = useState(new Date());\n  const [view, setView] = useState(mobileDevice ? 'listWeek' : 'dayGridMonth');\n  useEffect(() => {\n    gtm.push({\n      event: 'page_view'\n    });\n  }, []);\n  useEffect(() => {\n    dispatch(getEvents());\n  }, []);\n  useEffect(() => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      const newView = mobileDevice ? 'listWeek' : 'dayGridMonth';\n      calendarApi.changeView(newView);\n      setView(newView);\n    }\n  }, [mobileDevice]);\n\n  const handleDateToday = () => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      calendarApi.today();\n      setDate(calendarApi.getDate());\n    }\n  };\n\n  const handleViewChange = newView => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      calendarApi.changeView(newView);\n      setView(newView);\n    }\n  };\n\n  const handleDatePrev = () => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      calendarApi.prev();\n      setDate(calendarApi.getDate());\n    }\n  };\n\n  const handleDateNext = () => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      calendarApi.next();\n      setDate(calendarApi.getDate());\n    }\n  };\n\n  const handleAddClick = () => {\n    dispatch(openModal());\n  };\n\n  const handleRangeSelect = arg => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      calendarApi.unselect();\n    }\n\n    dispatch(selectRange(arg.start.getTime(), arg.end.getTime()));\n  };\n\n  const handleEventSelect = arg => {\n    dispatch(selectEvent(arg.event.id));\n  };\n\n  const handleEventResize = async ({\n    event\n  }) => {\n    try {\n      await dispatch(updateEvent(event.id, {\n        allDay: event.allDay,\n        start: event.start,\n        end: event.end\n      }));\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const handleEventDrop = async ({\n    event\n  }) => {\n    try {\n      await dispatch(updateEvent(event.id, {\n        allDay: event.allDay,\n        start: event.start,\n        end: event.end\n      }));\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const handleModalClose = () => {\n    dispatch(closeModal());\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Dashboard: Calendar | Material Kit Pro\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        backgroundColor: 'background.default',\n        minHeight: '100%',\n        py: 8\n      },\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: false,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          justifyContent: \"space-between\",\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              color: \"textPrimary\",\n              variant: \"h5\",\n              children: \"Here's what you planned\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Breadcrumbs, {\n              \"aria-label\": \"breadcrumb\",\n              separator: /*#__PURE__*/_jsxDEV(ChevronRightIcon, {\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 28\n              }, this),\n              sx: {\n                mt: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                color: \"textPrimary\",\n                component: RouterLink,\n                to: \"/dashboard\",\n                variant: \"subtitle2\",\n                children: \"Dashboard\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                color: \"textSecondary\",\n                variant: \"subtitle2\",\n                children: \"Calendar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                m: -1\n              },\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                color: \"primary\",\n                onClick: handleAddClick,\n                startIcon: /*#__PURE__*/_jsxDEV(PlusIcon, {\n                  fontSize: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 30\n                }, this),\n                sx: {\n                  m: 1\n                },\n                variant: \"contained\",\n                children: \"New Event\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 3\n          },\n          children: /*#__PURE__*/_jsxDEV(CalendarToolbar, {\n            date: date,\n            onDateNext: handleDateNext,\n            onDatePrev: handleDatePrev,\n            onDateToday: handleDateToday,\n            onViewChange: handleViewChange,\n            view: view\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          sx: {\n            mt: 3,\n            p: 2\n          },\n          children: /*#__PURE__*/_jsxDEV(FullCalendarWrapper, {\n            children: /*#__PURE__*/_jsxDEV(FullCalendar, {\n              allDayMaintainDuration: true,\n              dayMaxEventRows: 3,\n              droppable: true,\n              editable: true,\n              eventClick: handleEventSelect,\n              eventDisplay: \"block\",\n              eventDrop: handleEventDrop,\n              eventResizableFromStart: true,\n              eventResize: handleEventResize,\n              events: events,\n              headerToolbar: false,\n              height: 800,\n              initialDate: date,\n              initialView: view,\n              plugins: [dayGridPlugin, interactionPlugin, listPlugin, timeGridPlugin, timelinePlugin],\n              ref: calendarRef,\n              rerenderDelay: 10,\n              select: handleRangeSelect,\n              selectable: true,\n              weekends: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n          fullWidth: true,\n          maxWidth: \"sm\",\n          onClose: handleModalClose,\n          open: isModalOpen,\n          children: isModalOpen && /*#__PURE__*/_jsxDEV(CalendarEventForm, {\n            event: selectedEvent,\n            onAddComplete: handleModalClose,\n            onCancel: handleModalClose,\n            onDeleteComplete: handleModalClose,\n            onEditComplete: handleModalClose,\n            range: selectedRange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Calendar, \"P0U4HX3ZMiLXP78U1dZlttEdy60=\", false, function () {\n  return [useDispatch, useMediaQuery, useSelector, useSelector];\n});\n\n_c = Calendar;\nexport default Calendar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Calendar\");","map":{"version":3,"sources":["/home/ec2-user/environment/VarsityMediaLive07042021/src/pages/dashboard/Calendar.js"],"names":["useState","useRef","useEffect","Link","RouterLink","Helmet","FullCalendar","dayGridPlugin","interactionPlugin","listPlugin","timeGridPlugin","timelinePlugin","Box","Breadcrumbs","Button","Card","Container","Dialog","Grid","Typography","alpha","experimentalStyled","useMediaQuery","CalendarEventForm","CalendarToolbar","ChevronRightIcon","PlusIcon","gtm","closeModal","getEvents","openModal","selectEvent","selectRange","updateEvent","useDispatch","useSelector","selectedEventSelector","state","events","selectedEventId","calendar","find","_event","id","FullCalendarWrapper","theme","display","palette","divider","text","primary","background","default","main","color","fontFamily","typography","paddingBottom","paddingTop","secondary","padding","Calendar","dispatch","calendarRef","mobileDevice","breakpoints","down","isModalOpen","selectedRange","selectedEvent","date","setDate","Date","view","setView","push","event","calendarEl","current","calendarApi","getApi","newView","changeView","handleDateToday","today","getDate","handleViewChange","handleDatePrev","prev","handleDateNext","next","handleAddClick","handleRangeSelect","arg","unselect","start","getTime","end","handleEventSelect","handleEventResize","allDay","err","console","error","handleEventDrop","handleModalClose","backgroundColor","minHeight","py","mt","m","p"],"mappings":"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","sourcesContent":["import { useState, useRef, useEffect } from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { Helmet } from 'react-helmet-async';\nimport FullCalendar from '@fullcalendar/react';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport interactionPlugin from '@fullcalendar/interaction';\nimport listPlugin from '@fullcalendar/list';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport timelinePlugin from '@fullcalendar/timeline';\nimport {\n  Box,\n  Breadcrumbs,\n  Button,\n  Card,\n  Container,\n  Dialog,\n  Grid,\n  Link,\n  Typography\n} from '@material-ui/core';\nimport { alpha, experimentalStyled } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { CalendarEventForm, CalendarToolbar } from '../../components/dashboard/calendar';\nimport ChevronRightIcon from '../../icons/ChevronRight';\nimport PlusIcon from '../../icons/Plus';\nimport gtm from '../../lib/gtm';\nimport {\n  closeModal,\n  getEvents,\n  openModal,\n  selectEvent,\n  selectRange,\n  updateEvent\n} from '../../slices/calendar';\nimport { useDispatch, useSelector } from '../../store';\n\nconst selectedEventSelector = (state) => {\n  const { events, selectedEventId } = state.calendar;\n\n  if (selectedEventId) {\n    return events.find((_event) => _event.id === selectedEventId);\n  }\n\n  return null;\n};\n\nconst FullCalendarWrapper = experimentalStyled('div')(({ theme }) => ({\n  '& .fc-license-message': {\n    display: 'none'\n  },\n  '& .fc': {\n    '--fc-bg-event-opacity': 1,\n    '--fc-border-color': theme.palette.divider,\n    '--fc-daygrid-event-dot-width': '10px',\n    '--fc-event-text-color': theme.palette.text.primary,\n    '--fc-list-event-hover-bg-color': theme.palette.background.default,\n    '--fc-neutral-bg-color': theme.palette.background.default,\n    '--fc-page-bg-color': theme.palette.background.default,\n    '--fc-today-bg-color': alpha(theme.palette.primary.main, 0.25),\n    color: theme.palette.text.primary,\n    fontFamily: theme.typography.fontFamily\n  },\n  '& .fc .fc-col-header-cell-cushion': {\n    paddingBottom: '10px',\n    paddingTop: '10px'\n  },\n  '& .fc .fc-day-other .fc-daygrid-day-top': {\n    color: theme.palette.text.secondary\n  },\n  '& .fc-daygrid-event': {\n    padding: '10px'\n  }\n}));\n\nconst Calendar = () => {\n  const dispatch = useDispatch();\n  const calendarRef = useRef(null);\n  const mobileDevice = useMediaQuery((theme) => theme.breakpoints.down('sm'));\n  const { events, isModalOpen, selectedRange } = useSelector((state) => state.calendar);\n  const selectedEvent = useSelector(selectedEventSelector);\n  const [date, setDate] = useState(new Date());\n  const [view, setView] = useState(mobileDevice\n    ? 'listWeek'\n    : 'dayGridMonth');\n\n  useEffect(() => {\n    gtm.push({ event: 'page_view' });\n  }, []);\n\n  useEffect(() => {\n    dispatch(getEvents());\n  }, []);\n\n  useEffect(() => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      const newView = mobileDevice ? 'listWeek' : 'dayGridMonth';\n\n      calendarApi.changeView(newView);\n      setView(newView);\n    }\n  }, [mobileDevice]);\n\n  const handleDateToday = () => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n\n      calendarApi.today();\n      setDate(calendarApi.getDate());\n    }\n  };\n\n  const handleViewChange = (newView) => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n\n      calendarApi.changeView(newView);\n      setView(newView);\n    }\n  };\n\n  const handleDatePrev = () => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n\n      calendarApi.prev();\n      setDate(calendarApi.getDate());\n    }\n  };\n\n  const handleDateNext = () => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n\n      calendarApi.next();\n      setDate(calendarApi.getDate());\n    }\n  };\n\n  const handleAddClick = () => {\n    dispatch(openModal());\n  };\n\n  const handleRangeSelect = (arg) => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n\n      calendarApi.unselect();\n    }\n\n    dispatch(selectRange(arg.start.getTime(), arg.end.getTime()));\n  };\n\n  const handleEventSelect = (arg) => {\n    dispatch(selectEvent(arg.event.id));\n  };\n\n  const handleEventResize = async ({ event }) => {\n    try {\n      await dispatch(updateEvent(event.id, {\n        allDay: event.allDay,\n        start: event.start,\n        end: event.end\n      }));\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const handleEventDrop = async ({ event }) => {\n    try {\n      await dispatch(updateEvent(event.id, {\n        allDay: event.allDay,\n        start: event.start,\n        end: event.end\n      }));\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const handleModalClose = () => {\n    dispatch(closeModal());\n  };\n\n  return (\n    <>\n      <Helmet>\n        <title>Dashboard: Calendar | Material Kit Pro</title>\n      </Helmet>\n      <Box\n        sx={{\n          backgroundColor: 'background.default',\n          minHeight: '100%',\n          py: 8\n        }}\n      >\n        <Container maxWidth={false}>\n          <Grid\n            container\n            justifyContent=\"space-between\"\n            spacing={3}\n          >\n            <Grid item>\n              <Typography\n                color=\"textPrimary\"\n                variant=\"h5\"\n              >\n                Here&apos;s what you planned\n              </Typography>\n              <Breadcrumbs\n                aria-label=\"breadcrumb\"\n                separator={<ChevronRightIcon fontSize=\"small\" />}\n                sx={{ mt: 1 }}\n              >\n                <Link\n                  color=\"textPrimary\"\n                  component={RouterLink}\n                  to=\"/dashboard\"\n                  variant=\"subtitle2\"\n                >\n                  Dashboard\n                </Link>\n                <Typography\n                  color=\"textSecondary\"\n                  variant=\"subtitle2\"\n                >\n                  Calendar\n                </Typography>\n              </Breadcrumbs>\n            </Grid>\n            <Grid item>\n              <Box sx={{ m: -1 }}>\n                <Button\n                  color=\"primary\"\n                  onClick={handleAddClick}\n                  startIcon={<PlusIcon fontSize=\"small\" />}\n                  sx={{ m: 1 }}\n                  variant=\"contained\"\n                >\n                  New Event\n                </Button>\n              </Box>\n            </Grid>\n          </Grid>\n          <Box sx={{ mt: 3 }}>\n            <CalendarToolbar\n              date={date}\n              onDateNext={handleDateNext}\n              onDatePrev={handleDatePrev}\n              onDateToday={handleDateToday}\n              onViewChange={handleViewChange}\n              view={view}\n            />\n          </Box>\n          <Card\n            sx={{\n              mt: 3,\n              p: 2\n            }}\n          >\n            <FullCalendarWrapper>\n              <FullCalendar\n                allDayMaintainDuration\n                dayMaxEventRows={3}\n                droppable\n                editable\n                eventClick={handleEventSelect}\n                eventDisplay=\"block\"\n                eventDrop={handleEventDrop}\n                eventResizableFromStart\n                eventResize={handleEventResize}\n                events={events}\n                headerToolbar={false}\n                height={800}\n                initialDate={date}\n                initialView={view}\n                plugins={[\n                  dayGridPlugin,\n                  interactionPlugin,\n                  listPlugin,\n                  timeGridPlugin,\n                  timelinePlugin\n                ]}\n                ref={calendarRef}\n                rerenderDelay={10}\n                select={handleRangeSelect}\n                selectable\n                weekends\n              />\n            </FullCalendarWrapper>\n          </Card>\n          <Dialog\n            fullWidth\n            maxWidth=\"sm\"\n            onClose={handleModalClose}\n            open={isModalOpen}\n          >\n            {/* Dialog renders its body even if not open */}\n            {isModalOpen && (\n              <CalendarEventForm\n                event={selectedEvent}\n                onAddComplete={handleModalClose}\n                onCancel={handleModalClose}\n                onDeleteComplete={handleModalClose}\n                onEditComplete={handleModalClose}\n                range={selectedRange}\n              />\n            )}\n          </Dialog>\n        </Container>\n      </Box>\n    </>\n  );\n};\n\nexport default Calendar;\n"]},"metadata":{},"sourceType":"module"}