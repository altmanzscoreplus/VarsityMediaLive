{"ast":null,"code":"var _jsxFileName = \"/home/ec2-user/environment/VarsityMediaLive07042021/src/components/dashboard/calendar/CalendarEventForm.js\",\n    _s = $RefreshSig$();\n\nimport PropTypes from 'prop-types';\nimport toast from 'react-hot-toast';\nimport { addMinutes } from 'date-fns';\nimport * as Yup from 'yup';\nimport { Formik } from 'formik';\nimport MobileDateTimePicker from '@material-ui/lab/MobileDateTimePicker';\nimport { Box, Button, Divider, FormControlLabel, FormHelperText, IconButton, Switch, TextField, Typography } from '@material-ui/core';\nimport TrashIcon from '../../../icons/Trash';\nimport { createEvent, deleteEvent, updateEvent } from '../../../slices/calendar';\nimport { useDispatch } from '../../../store';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst getInitialValues = (event, range) => {\n  if (event) {\n    return {\n      allDay: event.allDay || false,\n      color: event.color || '',\n      description: event.description || '',\n      end: event.end ? new Date(event.end) : addMinutes(new Date(), 30),\n      start: event.start ? new Date(event.start) : new Date(),\n      title: event.title || '',\n      submit: null\n    };\n  }\n\n  if (range) {\n    return {\n      allDay: false,\n      color: '',\n      description: '',\n      end: new Date(range.end),\n      start: new Date(range.start),\n      title: '',\n      submit: null\n    };\n  }\n\n  return {\n    allDay: false,\n    color: '',\n    description: '',\n    end: addMinutes(new Date(), 30),\n    start: new Date(),\n    title: '',\n    submit: null\n  };\n};\n\nconst CalendarEventForm = props => {\n  _s();\n\n  const {\n    event,\n    onAddComplete,\n    onCancel,\n    onDeleteComplete,\n    onEditComplete,\n    range\n  } = props;\n  const dispatch = useDispatch();\n\n  const handleDelete = async () => {\n    try {\n      await dispatch(deleteEvent(event.id));\n      onDeleteComplete === null || onDeleteComplete === void 0 ? void 0 : onDeleteComplete();\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Formik, {\n    initialValues: getInitialValues(event, range),\n    validationSchema: Yup.object().shape({\n      allDay: Yup.bool(),\n      description: Yup.string().max(5000),\n      end: Yup.date().when('start', (start, schema) => start && schema.min(start, 'End date must be later than start date')),\n      start: Yup.date(),\n      title: Yup.string().max(255).required('Title is required')\n    }),\n    onSubmit: async (values, {\n      resetForm,\n      setErrors,\n      setStatus,\n      setSubmitting\n    }) => {\n      try {\n        const data = {\n          allDay: values.allDay,\n          description: values.description,\n          end: values.end.getTime(),\n          start: values.start.getTime(),\n          title: values.title\n        };\n\n        if (event) {\n          await dispatch(updateEvent(event.id, data));\n        } else {\n          await dispatch(createEvent(data));\n        }\n\n        resetForm();\n        setStatus({\n          success: true\n        });\n        setSubmitting(false);\n        toast.success('Calendar updated!');\n\n        if (!event && onAddComplete) {\n          onAddComplete();\n        }\n\n        if (event && onEditComplete) {\n          onEditComplete();\n        }\n      } catch (err) {\n        console.error(err);\n        toast.error('Something went wrong!');\n        setStatus({\n          success: false\n        });\n        setErrors({\n          submit: err.message\n        });\n        setSubmitting(false);\n      }\n    },\n    children: ({\n      errors,\n      handleBlur,\n      handleChange,\n      handleSubmit,\n      isSubmitting,\n      setFieldValue,\n      touched,\n      values\n    }) => /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          p: 3\n        },\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          align: \"center\",\n          color: \"textPrimary\",\n          gutterBottom: true,\n          variant: \"h5\",\n          children: event ? 'Add Event' : 'Edit Event'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          p: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          error: Boolean(touched.title && errors.title),\n          fullWidth: true,\n          helperText: touched.title && errors.title,\n          label: \"Title\",\n          name: \"title\",\n          onBlur: handleBlur,\n          onChange: handleChange,\n          value: values.title,\n          variant: \"outlined\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 2\n          },\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            error: Boolean(touched.description && errors.description),\n            fullWidth: true,\n            helperText: touched.description && errors.description,\n            label: \"Description\",\n            name: \"description\",\n            onBlur: handleBlur,\n            onChange: handleChange,\n            value: values.description,\n            variant: \"outlined\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 2\n          },\n          children: /*#__PURE__*/_jsxDEV(FormControlLabel, {\n            control: /*#__PURE__*/_jsxDEV(Switch, {\n              checked: values.allDay,\n              color: \"primary\",\n              name: \"allDay\",\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 19\n            }, this),\n            label: \"All day\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 2\n          },\n          children: /*#__PURE__*/_jsxDEV(MobileDateTimePicker, {\n            label: \"Start date\",\n            onChange: date => setFieldValue('start', date),\n            renderInput: inputProps => /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              variant: \"outlined\",\n              ...inputProps\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 19\n            }, this),\n            value: values.start\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 2\n          },\n          children: /*#__PURE__*/_jsxDEV(MobileDateTimePicker, {\n            label: \"End date\",\n            onChange: date => setFieldValue('end', date),\n            renderInput: inputProps => /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              variant: \"outlined\",\n              ...inputProps\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 19\n            }, this),\n            value: values.end\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 13\n        }, this), Boolean(touched.end && errors.end) && /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 2\n          },\n          children: /*#__PURE__*/_jsxDEV(FormHelperText, {\n            error: true,\n            children: errors.end\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          alignItems: 'center',\n          display: 'flex',\n          p: 2\n        },\n        children: [event && /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: () => handleDelete(),\n          children: /*#__PURE__*/_jsxDEV(TrashIcon, {\n            fontSize: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            flexGrow: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          color: \"primary\",\n          onClick: onCancel,\n          variant: \"text\",\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          color: \"primary\",\n          disabled: isSubmitting,\n          sx: {\n            ml: 1\n          },\n          type: \"submit\",\n          variant: \"contained\",\n          children: \"Confirm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CalendarEventForm, \"rgTLoBID190wEKCp9+G8W6F7A5M=\", false, function () {\n  return [useDispatch];\n});\n\n_c = CalendarEventForm;\nCalendarEventForm.propTypes = {\n  event: PropTypes.object,\n  onAddComplete: PropTypes.func,\n  onCancel: PropTypes.func,\n  onDeleteComplete: PropTypes.func,\n  onEditComplete: PropTypes.func,\n  range: PropTypes.object\n};\nexport default CalendarEventForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"CalendarEventForm\");","map":{"version":3,"sources":["/home/ec2-user/environment/VarsityMediaLive07042021/src/components/dashboard/calendar/CalendarEventForm.js"],"names":["PropTypes","toast","addMinutes","Yup","Formik","MobileDateTimePicker","Box","Button","Divider","FormControlLabel","FormHelperText","IconButton","Switch","TextField","Typography","TrashIcon","createEvent","deleteEvent","updateEvent","useDispatch","getInitialValues","event","range","allDay","color","description","end","Date","start","title","submit","CalendarEventForm","props","onAddComplete","onCancel","onDeleteComplete","onEditComplete","dispatch","handleDelete","id","err","console","error","object","shape","bool","string","max","date","when","schema","min","required","values","resetForm","setErrors","setStatus","setSubmitting","data","getTime","success","message","errors","handleBlur","handleChange","handleSubmit","isSubmitting","setFieldValue","touched","p","Boolean","mt","inputProps","alignItems","display","flexGrow","ml","propTypes","func"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport toast from 'react-hot-toast';\nimport { addMinutes } from 'date-fns';\nimport * as Yup from 'yup';\nimport { Formik } from 'formik';\nimport MobileDateTimePicker from '@material-ui/lab/MobileDateTimePicker';\nimport {\n  Box,\n  Button,\n  Divider,\n  FormControlLabel,\n  FormHelperText,\n  IconButton,\n  Switch,\n  TextField,\n  Typography\n} from '@material-ui/core';\nimport TrashIcon from '../../../icons/Trash';\nimport { createEvent, deleteEvent, updateEvent } from '../../../slices/calendar';\nimport { useDispatch } from '../../../store';\n\nconst getInitialValues = (event, range) => {\n  if (event) {\n    return {\n      allDay: event.allDay || false,\n      color: event.color || '',\n      description: event.description || '',\n      end: event.end ? new Date(event.end) : addMinutes(new Date(), 30),\n      start: event.start ? new Date(event.start) : new Date(),\n      title: event.title || '',\n      submit: null\n    };\n  }\n\n  if (range) {\n    return {\n      allDay: false,\n      color: '',\n      description: '',\n      end: new Date(range.end),\n      start: new Date(range.start),\n      title: '',\n      submit: null\n    };\n  }\n\n  return {\n    allDay: false,\n    color: '',\n    description: '',\n    end: addMinutes(new Date(), 30),\n    start: new Date(),\n    title: '',\n    submit: null\n  };\n};\n\nconst CalendarEventForm = (props) => {\n  const { event, onAddComplete, onCancel, onDeleteComplete, onEditComplete, range } = props;\n  const dispatch = useDispatch();\n\n  const handleDelete = async () => {\n    try {\n      await dispatch(deleteEvent(event.id));\n\n      onDeleteComplete?.();\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  return (\n    <Formik\n      initialValues={getInitialValues(event, range)}\n      validationSchema={Yup\n        .object()\n        .shape({\n          allDay: Yup.bool(),\n          description: Yup.string().max(5000),\n          end: Yup\n            .date()\n            .when('start',\n              (start, schema) => (start && schema.min(start,\n                'End date must be later than start date'))),\n          start: Yup.date(),\n          title: Yup\n            .string()\n            .max(255)\n            .required('Title is required')\n        })}\n      onSubmit={async (values, { resetForm, setErrors, setStatus, setSubmitting }) => {\n        try {\n          const data = {\n            allDay: values.allDay,\n            description: values.description,\n            end: values.end.getTime(),\n            start: values.start.getTime(),\n            title: values.title\n          };\n\n          if (event) {\n            await dispatch(updateEvent(event.id, data));\n          } else {\n            await dispatch(createEvent(data));\n          }\n\n          resetForm();\n          setStatus({ success: true });\n          setSubmitting(false);\n          toast.success('Calendar updated!');\n\n          if (!event && onAddComplete) {\n            onAddComplete();\n          }\n\n          if (event && onEditComplete) {\n            onEditComplete();\n          }\n        } catch (err) {\n          console.error(err);\n          toast.error('Something went wrong!');\n          setStatus({ success: false });\n          setErrors({ submit: err.message });\n          setSubmitting(false);\n        }\n      }}\n    >\n      {({\n        errors,\n        handleBlur,\n        handleChange,\n        handleSubmit,\n        isSubmitting,\n        setFieldValue,\n        touched,\n        values\n      }) => (\n        <form onSubmit={handleSubmit}>\n          <Box sx={{ p: 3 }}>\n            <Typography\n              align=\"center\"\n              color=\"textPrimary\"\n              gutterBottom\n              variant=\"h5\"\n            >\n              {event\n                ? 'Add Event'\n                : 'Edit Event'}\n            </Typography>\n          </Box>\n          <Box sx={{ p: 3 }}>\n            <TextField\n              error={Boolean(touched.title && errors.title)}\n              fullWidth\n              helperText={touched.title && errors.title}\n              label=\"Title\"\n              name=\"title\"\n              onBlur={handleBlur}\n              onChange={handleChange}\n              value={values.title}\n              variant=\"outlined\"\n            />\n            <Box sx={{ mt: 2 }}>\n              <TextField\n                error={Boolean(touched.description && errors.description)}\n                fullWidth\n                helperText={touched.description && errors.description}\n                label=\"Description\"\n                name=\"description\"\n                onBlur={handleBlur}\n                onChange={handleChange}\n                value={values.description}\n                variant=\"outlined\"\n              />\n            </Box>\n            <Box sx={{ mt: 2 }}>\n              <FormControlLabel\n                control={(\n                  <Switch\n                    checked={values.allDay}\n                    color=\"primary\"\n                    name=\"allDay\"\n                    onChange={handleChange}\n                  />\n                )}\n                label=\"All day\"\n              />\n            </Box>\n            <Box sx={{ mt: 2 }}>\n              <MobileDateTimePicker\n                label=\"Start date\"\n                onChange={(date) => setFieldValue('start', date)}\n                renderInput={(inputProps) => (\n                  <TextField\n                    fullWidth\n                    variant=\"outlined\"\n                    {...inputProps}\n                  />\n                )}\n                value={values.start}\n              />\n            </Box>\n            <Box sx={{ mt: 2 }}>\n              <MobileDateTimePicker\n                label=\"End date\"\n                onChange={(date) => setFieldValue('end', date)}\n                renderInput={(inputProps) => (\n                  <TextField\n                    fullWidth\n                    variant=\"outlined\"\n                    {...inputProps}\n                  />\n                )}\n                value={values.end}\n              />\n            </Box>\n            {Boolean(touched.end && errors.end) && (\n              <Box sx={{ mt: 2 }}>\n                <FormHelperText error>\n                  {errors.end}\n                </FormHelperText>\n              </Box>\n            )}\n          </Box>\n          <Divider />\n          <Box\n            sx={{\n              alignItems: 'center',\n              display: 'flex',\n              p: 2\n            }}\n          >\n            {event && (\n              <IconButton onClick={() => handleDelete()}>\n                <TrashIcon fontSize=\"small\" />\n              </IconButton>\n            )}\n            <Box sx={{ flexGrow: 1 }} />\n            <Button\n              color=\"primary\"\n              onClick={onCancel}\n              variant=\"text\"\n            >\n              Cancel\n            </Button>\n            <Button\n              color=\"primary\"\n              disabled={isSubmitting}\n              sx={{ ml: 1 }}\n              type=\"submit\"\n              variant=\"contained\"\n            >\n              Confirm\n            </Button>\n          </Box>\n        </form>\n      )}\n    </Formik>\n  );\n};\n\nCalendarEventForm.propTypes = {\n  event: PropTypes.object,\n  onAddComplete: PropTypes.func,\n  onCancel: PropTypes.func,\n  onDeleteComplete: PropTypes.func,\n  onEditComplete: PropTypes.func,\n  range: PropTypes.object\n};\n\nexport default CalendarEventForm;\n"]},"metadata":{},"sourceType":"module"}